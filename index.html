<!--
Germany Expat Tax Calculator (single-file interactive HTML)

Usage:
- Download this file (Save as index.html) and upload to GitHub as described in the guide below, or host on Netlify/Vercel.
- The "Assumptions" panel inside the page is editable so you can change 2025 defaults without editing the file. If you want to change the defaults that appear on first load, edit the ASSUMPTIONS object inside the <script> (near the top) before uploading.

Notes:
- This is an educational estimator. For official filings use certified tax software or a tax advisor.
- Do not paste personal confidential info into public sites.
-->

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Germany Expat Tax Calculator (2025) — Interactive</title>
  <style>
    :root{--bg:#f7fafc;--card:#ffffff;--accent:#0ea5e9;--muted:#6b7280;--greenbg:#ecfdf5;--greenborder:#86efac;--redbg:#fff1f2;--redborder:#fca5a5}
    body{font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; margin:0;background:var(--bg); color:#111}
    .wrap{max-width:1100px;margin:28px auto;padding:18px}
    header{display:flex;align-items:center;justify-content:space-between;padding:18px;border-radius:12px;background:linear-gradient(90deg,#0369a1,#7c3aed);color:#fff}
    header h1{margin:0;font-size:20px}
    main{display:grid;grid-template-columns:1fr 1.25fr;gap:18px;margin-top:18px}
    .card{background:var(--card);padding:16px;border-radius:10px;box-shadow:0 6px 20px rgba(2,6,23,0.06)}
    label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px}
    input[type=number],select,input[type=text]{width:100%;padding:10px;border-radius:8px;border:2px solid #e6eef8;background:var(--greenbg);box-sizing:border-box}
    .small{font-size:13px;color:var(--muted)}
    .result{display:flex;justify-content:space-between;align-items:center;padding:12px;border-radius:8px;margin-bottom:8px}
    .result .k{color:var(--muted)}
    .result .v{font-weight:700}
    .result.red{background:var(--redbg);border:1px solid var(--redborder);color:#b91c1c}
    .result.green{background:var(--greenbg);border:1px solid var(--greenborder);color:#065f46}
    .assumptions{margin-top:12px}
    .btn{display:inline-block;padding:8px 12px;border-radius:8px;background:var(--accent);color:#fff;text-decoration:none}
    footer{margin-top:14px;font-size:13px;color:var(--muted)}
    @media(max-width:900px){main{grid-template-columns:1fr}} 
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>Germany — Expat Income Tax Calculator (2025)</h1>
        <div class="small">Estimate income tax, solidarity surcharge, church tax and pension points. Editable assumptions.</div>
      </div>
      <div>
        <a class="btn" id="exportBtn" href="#">Download inputs</a>
      </div>
    </header>

    <main>
      <section class="card">
        <h3>Inputs</h3>
        <div style="margin-top:10px">
          <label>Gross annual salary (EUR)</label>
          <input type="number" id="gross" value="60000" />
        </div>

        <div style="margin-top:10px">
          <label>Insurance type</label>
          <select id="insurance">
            <option>Public</option>
            <option>Private</option>
          </select>
        </div>

        <div id="privateBlock" style="display:none;margin-top:10px">
          <label>Private insurance deductible (EUR)</label>
          <input type="number" id="privateDed" value="0" />
        </div>

        <div style="margin-top:10px">
          <label>Childless?</label>
          <select id="childless">
            <option>No</option>
            <option>Yes</option>
          </select>
        </div>

        <div style="margin-top:10px">
          <label>Other annual income (rent, dividends) (EUR)</label>
          <input type="number" id="otherIncome" value="0" />
        </div>

        <div style="margin-top:10px">
          <label>Capital income (EUR)</label>
          <input type="number" id="capitalIncome" value="0" />
        </div>

        <div style="margin-top:10px">
          <label>Rürup/Basisrente contributions (EUR)</label>
          <input type="number" id="ruRup" value="0" />
        </div>

        <div style="margin-top:10px">
          <label>Other deductible social contributions (EUR)</label>
          <input type="number" id="otherSocial" value="0" />
        </div>

        <div style="margin-top:10px">
          <label>Church member?</label>
          <select id="church">
            <option>No</option>
            <option>Yes</option>
          </select>
        </div>

        <div id="bavBlock" style="display:none;margin-top:10px">
          <label>Bavaria or Baden-Württemberg?</label>
          <select id="bav">
            <option>No</option>
            <option>Yes</option>
          </select>
        </div>

        <div style="margin-top:12px;font-size:13px;color:#475569">You can edit assumptions below — use this when tax rules change each year.</div>

        <div class="assumptions">
          <h4 style="margin-bottom:8px">Assumptions (editable)</h4>
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px">
            <div>
              <label>Basic allowance (Grundfreibetrag)</label>
              <input type="number" id="basicAllowance" value="12096" />
            </div>
            <div>
              <label>Pension rate (total)</label>
              <input type="number" step="0.001" id="pensionRate" value="0.186" />
            </div>
            <div>
              <label>Pension ceiling (EUR)</label>
              <input type="number" id="pensionCeiling" value="96600" />
            </div>
            <div>
              <label>Average earnings (EUR)</label>
              <input type="number" id="avgEarnings" value="50493" />
            </div>
            <div>
              <label>Rentenwert monthly (EUR)</label>
              <input type="number" step="0.01" id="rentenwert" value="40.79" />
            </div>
            <div>
              <label>Health rate</label>
              <input type="number" step="0.001" id="healthRate" value="0.146" />
            </div>
            <div>
              <label>Health supplement avg</label>
              <input type="number" step="0.001" id="healthSup" value="0.025" />
            </div>
            <div>
              <label>Health/LTC ceiling</label>
              <input type="number" id="healthCeiling" value="66150" />
            </div>
            <div>
              <label>Long-term care rate</label>
              <input type="number" step="0.001" id="ltcRate" value="0.036" />
            </div>
            <div>
              <label>Soli tax lower threshold (EUR)</label>
              <input type="number" id="soliLower" value="19450" />
            </div>
            <div>
              <label>Soli zvE full (EUR)</label>
              <input type="number" id="soliZvEFull" value="105500" />
            </div>
            <div>
              <label>Church tax default rate</label>
              <input type="number" step="0.01" id="churchRate" value="0.09" />
            </div>
            <div>
              <label>Rürup cap (single)</label>
              <input type="number" id="ruCap" value="29344" />
            </div>
          </div>
        </div>

      </section>

      <aside class="card">
        <h3>Results</h3>
        <div style="margin-top:12px">
          <div class="result green"><div class="k">Gross salary</div><div class="v" id="outGross">€0</div></div>

          <div class="result"><div class="k">Total employee social contributions (approx)</div><div class="v" id="outSoc">€0</div></div>

          <div class="result"><div class="k">Taxable income (zvE)</div><div class="v" id="outZVE">€0</div></div>

          <div class="result red"><div class="k">Income tax (ESt)</div><div class="v" id="outTax">€0</div></div>

          <div class="result red"><div class="k">Solidarity surcharge (Soli)</div><div class="v" id="outSoli">€0</div></div>

          <div class="result red"><div class="k">Church tax</div><div class="v" id="outChurch">€0</div></div>

          <div class="result red"><div class="k">Net income (annual)</div><div class="v" id="outNet">€0</div></div>

          <hr style="margin:12px 0" />
          <div class="small">Pension projection (simple)</div>
          <div class="result"><div class="k">Entgeltpunkte (annual)</div><div class="v" id="outEP">0</div></div>
          <div class="result"><div class="k">Estimated annual pension</div><div class="v" id="outPension">€0</div></div>
        </div>

        <div style="margin-top:14px">
          <div class="small">Tips:</div>
          <ul class="small">
            <li>Use the Rürup field to test tax optimisation.</li>
            <li>Edit the assumptions below when rules change; changes apply immediately.</li>
            <li>To publish: save as <code>index.html</code> and upload to GitHub Pages or Netlify (see guide below).</li>
          </ul>
        </div>
      </aside>
    </main>

    <footer class="card" style="margin-top:16px">
      <strong>Publishing guide (quick):</strong>
      <ol>
        <li>Create a free GitHub account at <a href="https://github.com" target="_blank">github.com</a>.</li>
        <li>Create a new public repository (e.g. <code>germany-expat-tax-calculator</code>).</li>
        <li>Upload this file as <code>index.html</code> (Repo &rarr; Add file &rarr; Upload files &rarr; Commit).</li>
        <li>Go to Settings → Pages → Branch: <code>main</code> / Folder: <code>/ (root)</code> → Save. Wait ~1 minute.</li>
        <li>Your site will be available at <code>https://&lt;your-username&gt;.github.io/&lt;repo-name&gt;/</code>.</li>
      </ol>

      <div style="margin-top:8px">If you'd prefer, you can drag & drop this <code>index.html</code> into Netlify's "Sites → Add new site → Deploy site (drag and drop)" for an even simpler publish flow.</div>

      <div style="margin-top:10px" class="small">I can also walk you through each GitHub step in real time — tell me when you're ready and I'll guide you through clicking the buttons.</div>
    </footer>
  </div>

<script>
  // Editable defaults here (also exposed in the assumptions inputs)
  const ASSUMPTIONS = {
    basicAllowance: 12096,
    pensionRateTotal: 0.186,
    pensionCeiling: 96600,
    avgEarnings: 50493,
    rentenwertMonthly: 40.79,
    healthRate: 0.146,
    healthSupplementAvg: 0.025,
    healthCeiling: 66150,
    longTermCareRate: 0.036,
    soliTaxLowerThreshold: 19450,
    soliZvEFull: 105500,
    churchRateDefault: 0.09,
    ruRupCap: 29344
  };

  // §32a piecewise tax function (official style)
  function incomeTaxOfficial(zve){
    const y = (zve - 12096) / 10000;
    const z = (zve - 17443) / 10000;
    if(zve <= 12096) return 0;
    if(zve <= 17443){
      const tax = ((y * 932.3 + 1400) * y);
      return Math.max(0,tax);
    }
    if(zve <= 68480){
      const tax = ((z * 176.64 + 2397) * z + 1015.13);
      return Math.max(0,tax);
    }
    if(zve <= 277825){
      return 0.42 * zve - 10911.92;
    }
    return 0.45 * zve - 19246.67;
  }

  function calculateSoli(taxAmount, assumptions){
    const taxAtFull = incomeTaxOfficial(assumptions.soliZvEFull);
    const lower = assumptions.soliTaxLowerThreshold;
    const full = Math.max(1, Math.round(taxAtFull));
    if(taxAmount <= lower) return 0;
    if(taxAmount >= full) return Math.round(taxAmount * 0.055);
    const phaseFactor = (taxAmount - lower) / (full - lower);
    return Math.round(taxAmount * 0.055 * phaseFactor);
  }

  // update from dom
  function readInputs(){
    return {
      gross: Number(document.getElementById('gross').value)||0,
      insurance: document.getElementById('insurance').value,
      privateDed: Number(document.getElementById('privateDed').value)||0,
      childless: document.getElementById('childless').value === 'Yes',
      otherIncome: Number(document.getElementById('otherIncome').value)||0,
      capitalIncome: Number(document.getElementById('capitalIncome').value)||0,
      ruRup: Number(document.getElementById('ruRup').value)||0,
      otherSocial: Number(document.getElementById('otherSocial').value)||0,
      church: document.getElementById('church').value === 'Yes',
      bav: document.getElementById('bav').value === 'Yes'
    };
  }

  function readAssumptions(){
    return {
      basicAllowance: Number(document.getElementById('basicAllowance').value)||ASSUMPTIONS.basicAllowance,
      pensionRateTotal: Number(document.getElementById('pensionRate').value)||ASSUMPTIONS.pensionRateTotal,
      pensionCeiling: Number(document.getElementById('pensionCeiling').value)||ASSUMPTIONS.pensionCeiling,
      avgEarnings: Number(document.getElementById('avgEarnings').value)||ASSUMPTIONS.avgEarnings,
      rentenwertMonthly: Number(document.getElementById('rentenwert').value)||ASSUMPTIONS.rentenwertMonthly,
      healthRate: Number(document.getElementById('healthRate').value)||ASSUMPTIONS.healthRate,
      healthSupplementAvg: Number(document.getElementById('healthSup').value)||ASSUMPTIONS.healthSupplementAvg,
      healthCeiling: Number(document.getElementById('healthCeiling').value)||ASSUMPTIONS.healthCeiling,
      longTermCareRate: Number(document.getElementById('ltcRate').value)||ASSUMPTIONS.longTermCareRate,
      soliTaxLowerThreshold: Number(document.getElementById('soliLower').value)||ASSUMPTIONS.soliTaxLowerThreshold,
      soliZvEFull: Number(document.getElementById('soliZvEFull').value)||ASSUMPTIONS.soliZvEFull,
      churchRateDefault: Number(document.getElementById('churchRate').value)||ASSUMPTIONS.churchRateDefault,
      ruRupCap: Number(document.getElementById('ruCap').value)||ASSUMPTIONS.ruRupCap
    };
  }

  function formatEUR(v){ return '€' + v.toLocaleString(); }

  function compute(){
    const inps = readInputs();
    const A = readAssumptions();

    // show/hide private block
    document.getElementById('privateBlock').style.display = inps.insurance === 'Private' ? 'block' : 'none';
    document.getElementById('bavBlock').style.display = inps.church ? 'block' : 'none';

    // social contributions (employee approx)
    const pensionEmployee = (A.pensionRateTotal/2) * Math.min(inps.gross, A.pensionCeiling);
    const healthEmployee = ((A.healthRate + A.healthSupplementAvg)/2) * Math.min(inps.gross, A.healthCeiling);
    const ltcEmployee = (A.longTermCareRate/2) * Math.min(inps.gross, A.healthCeiling);
    const totalEmployee = Math.round(pensionEmployee + healthEmployee + ltcEmployee + inps.otherSocial);

    const ruDeductible = Math.min(inps.ruRup, A.ruRupCap);
    const privateDeduct = inps.insurance === 'Private' ? inps.privateDed : 0;

    const zvE = Math.max(0, Math.round(inps.gross + inps.otherIncome + inps.capitalIncome - totalEmployee - privateDeduct - ruDeductible - A.basicAllowance));

    const tax = Math.max(0, Math.round(incomeTaxOfficial(zvE)));
    const soli = calculateSoli(tax, A);
    const churchRate = inps.church ? (inps.bav ? 0.08 : A.churchRateDefault) : 0;
    const churchTax = Math.round(tax * churchRate);
    const net = Math.round(inps.gross - totalEmployee - tax - soli - churchTax);

    const entgeltpunkte = Math.min(inps.gross, A.pensionCeiling) / A.avgEarnings;
    const annualPension = Math.round(entgeltpunkte * A.rentenwertMonthly * 12);

    // render
    document.getElementById('outGross').textContent = formatEUR(inps.gross);
    document.getElementById('outSoc').textContent = formatEUR(totalEmployee);
    document.getElementById('outZVE').textContent = formatEUR(zvE);
    document.getElementById('outTax').textContent = formatEUR(tax);
    document.getElementById('outSoli').textContent = formatEUR(soli);
    document.getElementById('outChurch').textContent = formatEUR(churchTax);
    document.getElementById('outNet').textContent = formatEUR(net);
    document.getElementById('outEP').textContent = entgeltpunkte.toFixed(3);
    document.getElementById('outPension').textContent = formatEUR(annualPension);
  }

  // wire up events
  const fields = ['gross','insurance','privateDed','childless','otherIncome','capitalIncome','ruRup','otherSocial','church','bav','basicAllowance','pensionRate','pensionCeiling','avgEarnings','rentenwert','healthRate','healthSup','healthCeiling','ltcRate','soliLower','soliZvEFull','churchRate','ruCap'];
  fields.forEach(id => { const el = document.getElementById(id); if(el){el.addEventListener('input', compute); el.addEventListener('change', compute);} });

  // export inputs to JSON
  document.getElementById('exportBtn').addEventListener('click', function(e){
    e.preventDefault();
    const payload = {inputs: readInputs(), assumptions: readAssumptions(), results: {
      gross: document.getElementById('outGross').textContent,
      totalSocial: document.getElementById('outSoc').textContent,
      zvE: document.getElementById('outZVE').textContent,
      tax: document.getElementById('outTax').textContent,
      soli: document.getElementById('outSoli').textContent,
      church: document.getElementById('outChurch').textContent,
      net: document.getElementById('outNet').textContent,
      pensionAnnual: document.getElementById('outPension').textContent
    }};
    const blob = new Blob([JSON.stringify(payload,null,2)],{type:'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a'); a.href = url; a.download = 'tax-inputs-and-results.json'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
  });

  // initial compute
  compute();
</script>
</body>
</html>
